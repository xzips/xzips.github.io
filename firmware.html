<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Aspen Euler Fluid Simulation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/custom.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <link rel="stylesheet" href="css/ionicons.min.css">
    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
	  
	  
	  
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar ftco-navbar-light site-navbar-target" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.html">Aspen</a>
	      <button class="navbar-toggler js-fh5co-nav-toggle fh5co-nav-toggle" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav nav ml-auto">
            <li class="nav-item"><a href="index.html#home-section" class="nav-link"><span>Home</span></a></li>
            <li class="nav-item"><a href="index.html#about-section" class="nav-link"><span>About</span></a></li>
            <li class="nav-item"><a href="index.html#resume-section" class="nav-link"><span>Resume</span></a></li>
            <li class="nav-item"><a href="index.html#projects-section" class="nav-link"><span>Projects</span></a></li>
            <li class="nav-item"><a href="#index.htmlcontact-section" class="nav-link"><span>Contact</span></a></li>
	        </ul>
	      </div>
	    </div>
	  </nav>
	  <!-- <section class="hero-wrap js-fullheight" style="background-image: url('images/bg_1.jpg');">-->
    <section class="hero-wrap js-fullheight">
        <video autoplay muted loop id="background-video">
          <source src="videos/Firmware BG.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      
        <div class="overlay"></div>
        <div class="container">
          <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-center">
            <div class="col-md-12 ftco-animate pb-5 mb-3 text-center">
              <h1 class="mb-3 bread">Spacecraft Firmware Developer</h1>
            </div>
          </div>
        </div>
    </section>

    <section class="ftco-section" style = "padding-top: 100px;"></section>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 ftco-animate">
            <h2 class="mb-2">How I Created Embedded System Firmware for a Student Design Team's Hyperspectral Imaging Satellite</h2>
 
            <h2 >Introduction </h2>
            At the start of my first year of university, I joined the University of Toronto Aerospace Team (UTAT) in the Space Systems division.
            As someone with a lot of prior programming experience, I decided to join the firmware team for the satellite. The satellite 
            were developed was a hyperspectral imaging satellite, which captures images in many different wavelengths to map crop residue and
            greenhouse gas emissions of farmland from space. The project is called FINCH, and will be launching on a SpaceX rocket in 2025.
            Working on the firmware, we followed a strict FSM (Finite State Machine) design pattern, and used FreeRTOS as the operating system.
            The high-level FSM architecture is shown below.

            <img src="images/SatelliteFSM.JPG" alt="Satellite FSM" style="width: 100%; max-width: 600px; margin-top: 10px; margin-bottom: 10px; display: block;">
            
            
            <h2 >Learning STM32 & FreeRTOS </h2>
            STM32 is like the industry version of the Arduino, but with more features and a lot more complexity. Upon joining the team, I had
            to complete a month-long training program to learn how to use the STM32CubeIDE, for firmware development, which I had no prior experience with.
            I successfully completed the training, and was able to start working on the project (the video at the top of this page) is 
            part of my final demo project for the training programming. Throughout my approximate 1 year on the team,
            I worked with 2 other members primarily, as well as with the leads of other subsystems to make three notable contributions to the project, 
            as will be discussed below. I should also note, that all code for the STM32 was written in C, and built on top of the FreeRTOS operating system.
            
            <img src="images/STM32_FreeRTOS.jpg" alt="Satellite FSM" style="width: 100%; max-width: 600px; margin-top: 10px; margin-bottom: 10px; display: block;">
            
            <h2 >Team-Wide Firmware Testing Standards</h2>
            Because of my pre-existing experience, one of my first tasks was to create a testing and requirement framework for all firmware to be developed
            by the team. Since satellites are very expensive and you can't change anything once they're in space, it's absolutely critical that all code
            can be tested and verified to be working correctly in chunks, and as a whole. I researched NASA and ESA standards for satellite firmware testing
            in depth, and created a comprehensive guide, as well as template for planning unit tests, integration tests, and system tests. 
            
            <p>
              Below is a screenshot of a small part of the testing document I created, specifically the end of guidelines and beginning of the template.
              
            </p>
            
            
            
            <img src="images/firmware_testing_screenshot.JPG" alt="Firmware Testing System" style="width: 100%; max-width: 600px; margin-top: 10px; margin-bottom: 10px; display: block;">
            
            
            <h2> Reliability-Critical Battery Management System Firmware </h2>
            My next significant contribution was writing most of the core firmware for the battery management system (BMS) of the satellite. The BMS is
            important in regulating power flow to the satellite, and charging from the solar panels. Additionally, real-time monitoring of each battery
            cell voltage and temperature is critical to prevent fires or explosions under unexpected conditions. Finally, the BMS chip we were using did not
            have an existing library, so myself and another team-member had to scour the datasheet and write our own library from scratch to interface with
            the chip. The code was written in C, and used FreeRTOS to manage the tasks. The code was also written to be as modular as possible, so that
            future team members could easily add new features or modify existing ones. All code written was compliant with the testing standards I had
            developed earlier. Below is a schematic of the BMS system chip from the datasheet, as well as a screenshot of the electrical 
            power PCB on which the chip was integrated.

            <img src="images/BMSSchematic.JPG" alt="BMS Schematic" style="width: 100%; max-width: 600px; margin-top: 10px; margin-bottom: 10px; display: block;">
            <img src="images/FINCH PCB 1.JPG" alt="BMS Schematic" style="width: 100%; max-width: 600px; margin-top: 10px; margin-bottom: 10px; display: block;">
            
            <h2 > SFSF & FreeRTOS Integration </h2>
            
            Due to how the satellite architecture was planned, we had opted to use an existing library for spaceflight control operations, namely
            <b>SmallSat Flight Software Framework (SFSF)</b>. This is an advanced piece of software designed to handle low-level operations of
            CubeSat satellites, such as power management, communication, and data storage. The library was written in C, however, at the time it was
            not directly compatible with FreeRTOS. Myself and 2 other team members were tasked with integrating the two libraries, so that we could
            use them together in the satellite. This was a very challenging task, as the two libraries were not designed to work together, and we had
            to spend a lot of time debugging compiler errors, and once it finally compiled we had plenty of other issues to solve too. However,
            in the end we were able to get a minimal working example of the two libraries running together, which we handed over to the rest of the
            team to work with. There isn't much to show for this task in a visual sense, but here is a screenshot of the SFSF role in the satellite.
            
            
            <img src="images/SFSFApplication.JPG" alt="SFSF Application" style="width: 100%; max-width: 600px; margin-top: 10px; margin-bottom: 10px; display: block;">
            
            






            
          </div>
          <div class="col-lg-4 sidebar ftco-animate">
            <div class="sidebar-box ftco-animate">
              <h3 class="heading-sidebar">Top Projects</h3>
              
              <div class="block-21 mb-4 d-flex">
                <a class="blog-img mr-4" style="background-image: url(images/rc_plane_cad.PNG);"></a>
                <div class="text">
                  <h3 class="heading"><a href="uav.html">High-Performance 3D Printed UAV</a></h3>
                  <div class="meta">
                    <div><a href="#"><span class="icon-person"></span> individual</a></div>
                    <div><a href="#"><span class="icon-calendar"></span> 2024</a></div>
                  </div>
                </div>
              </div>
              
              <div class="block-21 mb-4 d-flex">
                <a class="blog-img mr-4" style="background-image: url(images/VortexSheddingCircleCropped.JPG);"></a>
                <div class="text">
                  <h3 class="heading"><a href="fluids.html">Realtime Fluid Simulation Using C++</a></h3>
                  <div class="meta">
                    <div><a href="#"><span class="icon-person"></span> individual</a></div>
                    <div><a href="#"><span class="icon-calendar"></span> 2024</a></div>
                  </div>
                </div>
              </div>

              <div class="block-21 mb-4 d-flex">
                <a class="blog-img mr-4" style="background-image: url(images/TargeterCAD_1.JPG);"></a>
                <div class="text">
                  <h3 class="heading"><a href="pointer.html">Precise Automated Laser Star Pointer</a></h3>
                  <div class="meta">
                    <div><a href="#"><span class="icon-person"></span> individual</a></div>
                    <div><a href="#"><span class="icon-calendar"></span> 2024</a></div>
                  </div>
                </div>
              </div>
              <div class="block-21 mb-4 d-flex">
                <a class="blog-img mr-4" style="background-image: url(images/FinchCAD2024.JPG);"></a>
                <div class="text">
                  <h3 class="heading"><a href="firmware.html">Hyperspectral Imaging Satellite Firmware</a></h3>
                  <div class="meta">
                    <div><a href="#"><span class="icon-person"></span> team</a></div>
                    <div><a href="#"><span class="icon-calendar"></span> 2022-2023</a></div>
                  </div>
                </div>
   
              </div>

              <div class="block-21 mb-4 d-flex">
                <a class="blog-img mr-4" style="background-image: url(images/RocketGeneric.JPG);"></a>
                <div class="text">
                  <h3 class="heading"><a href="avionics.html">Liquid Propelled Rocket Avionics</a></h3>
                  <div class="meta">
                    <div><a href="#"><span class="icon-person"></span> team</a></div>
                    <div><a href="#"><span class="icon-calendar"></span> 2024-Present</a></div>
                  </div>
                </div>
            </div>

            <div class="sidebar-box ftco-animate">
              <h3 class="heading-sidebar">Tags</h3>
              <div class="tagcloud">
                <a href="#" class="tag-cloud-link">embedded systems</a>
                <a href="#" class="tag-cloud-link">STM32</a>
                <a href="#" class="tag-cloud-link">C / C++</a>
                <a href="#" class="tag-cloud-link">FreeRTOS</a>
                <a href="#" class="tag-cloud-link">Space System Design</a>
                <a href="#" class="tag-cloud-link">Teamwork</a>
              </div>
            </div>

          </div>

        </div>
      </div>
    </section> <!-- .section -->
		
    <footer class="ftco-footer ftco-section">
      <div class="container">
        <div class="row mb-5">

          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-4">
              <h2 class="ftco-heading-2">Navigation</h2>
              <ul class="list-unstyled">


                <li><a href="index.html#home-section"><span class="icon-long-arrow-right mr-2"></span>Home</a></li>
                <li><a href="index.html#about-section"><span class="icon-long-arrow-right mr-2"></span>About</a></li>
                <li><a href="index.html#resume-section"><span class="icon-long-arrow-right mr-2"></span>Resume</a></li>
                <li><a href="index.html#projects-section"><span class="icon-long-arrow-right mr-2"></span>Projects</a></li>
                <li><a href="index.html#contact-section"><span class="icon-long-arrow-right mr-2"></span>Contact</a></li>


              </ul>
            </div>
          </div>
       
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Contact</h2>
            	<div class="block-23 mb-3">
	              <ul>
	                 <li><a href="#"><span class="icon icon-envelope"></span><span class="text"> &#160aspen.erlandsson@mail.utoronto.ca</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">


          </div>
        </div>
      </div>
    </footer>
    
  


  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  
  <script src="js/main.js"></script>
    
  </body>
</html>